<html>
<head>></head>
<body>
<script>
var alldemcodes;

function getQueryVariable(variable)
{
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
       }
       return(false);
}

var alist = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
var blist = "CKBOXTGSZAINDUPHQYEJFWVLRM";
var clist = "NKLAOITQWFXRMSPGBEJZCHUYDV";
var asstSeed = [2387,6915,7724,3629,8591,7263,4958,6213,7791,8621,5948,8816];
var topicList = ["KC","KG","NL","VP","2D","MC","WE","CG","idk","SE","EC","idk","SM","LC","RM","RL"]
//							3 				6 			   9 	
var topicSeed = [23958214,19763819,55387261,19459872,33461875,78851892,31428965,54971332,29873175,49821583,67239189,17547829,78312564,98123554,78129564,47891265]

var digitSum = function(x,list){
	var sum = 0;
	for(var i =0; i < x.length; i++){
		if(typeof(list) !== 'undefined'){
			var n = list.search(x[i])+1;//cuz Livecode
			sum += n;
		}
		else{
			sum += Number(x[i]);
		}
	}
	return sum;
}
var digitProd = function(x,list){
	var prod = 1;
	for(var i = x.length-4; i < x.length; i++){
		if(typeof(list) !== 'undefined'){
			var n = list.search(x[i])+1;//cuz Livecode
			if(n!=0)
				prod *= n;
		}
		else{
			var n = Number(x[i]);
			if(n!=0)
				prod *= n;
		}
	}
	return prod;
}

var getCodes = function(id,tc){
	for(var topicNum = 1; topicNum < 17; topicNum++){

	var topic = String(topicSeed[topicNum-1]);
	for(var asstNum=1;asstNum<13;asstNum++){


		var asst = String(asstSeed[asstNum-1]);
		

		var idsum = digitSum(id);
		var idprod = digitProd(id);
		var tcsuma = digitSum(tc,alist);
		var tcproda = digitProd(tc,alist);
		var tcsumb = digitSum(tc,blist);
		var tcprodb = digitProd(tc,blist);
		var tcsumc = digitSum(tc,clist);
		var tcprodc = digitProd(tc,clist);
		//console.log(idsum,idprod,tcsuma,tcproda,tcsumb,tcprodb,tcsumc,tcprodc);

		//put 7*IDSum + (char 1 to 3 of studentID) + 3*(the last char of studentID) + IDProduct*asstSeed + char 6 to 7 of topicSeed + tCSumA into varA
		var a = 7*idsum + Number(id.substring(0,3))+3*Number(id[id.length-1]) + idprod*Number(asst) + Number(topic.substring(5,6+1)) + tcsuma;

		//put studentID - IDSum + 3*topicNumber + 5*(char 5 of studentID) - char 7 of topicSeed + tCSumB*(char (IDChars-1) to IDChars of studentID) into varB

		var b = Number(id) - idsum + 3*topicNum + 5*(Number(id[4])) - Number(topic[6]) + tcsumb*(Number(id.substring(id.length-2)));
		//put 3*(char 1 to 3 of studentID) + IDSum*(char 1 of topicSeed) + IDProduct*3 - (char 2 to 3 of topicSeed) + (char 1 to 2 of asstSeed)*(char 7 of topicSeed) + tCSumC into varC

		var c = 3*(Number(id.substring(0,3))) + idsum*(Number(topic[0])) + idprod*3 - Number(topic.substring(1,3)) + Number(asst.substring(0,2))*Number(topic[6]) + tcsumc;
		//put 2*(char 6 of studentID) + 5*(char (IDChars - 1) of studentID) + tCProductA + (char 3 to 5 of topicSeed) + (char 2 of TCProductA)*(char 3 to 4 of asstSeed) + asstNumber*(last char of studentID) into varD

		var d = 2*Number(id[5]) + 5*Number(id[id.length-2]) + tcproda + Number(topic.substring(2,5)) + Number(String(tcproda)[1])*Number(asst.substring(2,4)) + asstNum*Number(id[id.length-1]);
		//put 5*IDProduct + 7*topicNumber + (asstNumber+2)*(char 2 of asstSeed)*(char 5 to 7 of topicSeed) + tCProductB - 3*tCSumB into varE

		var e = 5*idprod + 7*topicNum + (asstNum+2)*Number(asst[1])*Number(topic.substring(4,7)) + tcprodb - 3*tcsumb;
		//put topicNumber*tCSumC + IDSum*(asstNumber + tCSumC)*(char 3 to 4 of asstSeed)*(char 1 to 2 of topicSeed) + 3*(char (IDChars-2) to IDChars of studentID) into varF

		var f = topicNum*tcsumc + idsum*(asstNum+tcsumc)*(Number(asst.substring(2,4)))*(Number(topic.substring(0,2))) + 3*(Number(id.substring(id.length-3,id.length)));

		//console.log(a,b,c,d,e,f);

		var code = "g"+ alist[(a+c)%26] + blist[(a+b+d)%26] + "-" + clist[(a+d+e)%26] + alist[(a*2+b+f*3)%26]  + "-" +  alist[(a*3+b*2+e+f)%26] + clist[(b*3+c*5+d*4+e*4)%26] + blist[(d*7+a+f*3+e)%26];
		var whatever = "Topic: " + topicList[topicNum-1] +  " Assignment " + String(asstNum) + ": " + code;
		alldemcodes += whatever + "<br>";
		
	}
	}
	return alldemcodes;
}


var t = getQueryVariable("teacher");
var output = getCodes(getQueryVariable("id"),t||"MACK");
//document.write(output);
var para = document.createElement("p");
para.innerHTML = output;
document.body.appendChild(para);
</script>
</body>
</html>